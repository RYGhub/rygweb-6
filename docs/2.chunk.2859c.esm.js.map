{"version":3,"sources":["webpack:///./components/changepasswordbox.js","webpack:///./components/maintitle.less","webpack:///./components/changeNumber.less","webpack:///./components/hbuttononce.js","webpack:///./components/userInfoBox.js","webpack:///./components/invisiTable.less","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/fiorygiBox.less","webpack:///./components/logoutBox.js","webpack:///./components/changeNumber.js","webpack:///./components/fiorygiBox.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js","webpack:///./components/invisiTable.js"],"names":["ChangePasswordBox","Component","constructor","super","onPasswordInputChange","e","this","setState","target","value","onButtonClick","fetch","method","body","JSON","stringify","props","loggedIn","token","state","new_password","then","response","json","data","revoked_tokens","render","left","label","type","onChange","disabled","status","onClick","module","exports","HButtonOnce","icon","faSpinner","pulse","faCheck","faExclamationCircle","toString","UserInfoBox","user","uid","role","Success","class","style","successcolor","faCheckCircle","children","MainTitle","title","image","src","imgsrc","alt","imgalt","text","LogoutBox","onLogoutClick","ChangeNumber","colorClass","additionalText","positive","neutral","negative","changenumber","FiorygiBox","getData","j","componentDidMount","contents","tablerows","transactions","map","t","index","key","amount","change","reason","transactiontable","fiorygi","UserProfile","userId","componentDidUpdate","previousProps","previousState","snapshot","thisIsMyProfile","username","InvisiTable","invisitable"],"mappings":"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","file":"2.chunk.2859c.esm.js","sourcesContent":["import { Component } from 'preact';\nimport HInput from './hinput';\nimport HButtonOnce from './hbuttononce';\nimport Success from './success';\nimport Box from './box';\n\nexport default class ChangePasswordBox extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"new_password\": null,\n\t\t\t\"status\": \"waiting\",\n\t\t\t\"revoked_tokens\": null\n\t\t};\n\t}\n\n\tonPasswordInputChange = e => {\n\t\tthis.setState({\n\t\t\t\"new_password\": e.target.value\n\t\t})\n\t};\n\n\tonButtonClick = e => {\n\t\tthis.setState({\n\t\t\t\"status\": \"running\"\n\t\t});\n\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify({\n\t\t\t\t\"token\": this.props.loggedIn.token,\n\t\t\t\t\"new_password\": this.state.new_password\n\t\t\t})\n\t\t}).then((response) => {\n\t\t\treturn response.json();\n\t\t}).then((json) => {\n\t\t\tthis.setState({\n\t\t\t\t\"status\": \"done\",\n\t\t\t\t\"revoked_tokens\": json.data.revoked_tokens\n\t\t\t});\n\t\t});\n\t};\n\n\trender() {\n\t\tlet inputDisabled = (this.state.status !== \"waiting\");\n\n\t\treturn (\n\t\t\t<Box left={\"Cambia password\"}>\n\n\t\t\t\t<HInput\n\t\t\t\t\tlabel={\"Nuova password\"}\n\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\tvalue={this.state.new_password}\n\t\t\t\t\tonChange={this.onPasswordInputChange}\n\t\t\t\t\tdisabled={inputDisabled}/>\n\n\t\t\t\t<HButtonOnce\n\t\t\t\t\tlabel={\"Cambia password\"}\n\t\t\t\t\tonClick={this.onButtonClick}\n\t\t\t\t\tstatus={this.state.status}/>\n\n\t\t\t\t{\n\t\t\t\t\tthis.state.status === \"done\"\n\t\t\t\t\t? <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.revoked_tokens} accessi.</Success>\n\t\t\t\t\t: \"\"\n\t\t\t\t}\n\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"changenumber\":\"changenumber__3QTDZ\",\"positive\":\"positive__2qKdo\",\"neutral\":\"neutral__1rGMM\",\"negative\":\"negative__1tWJB\"};","import { Component } from 'preact';\r\nimport HButton from './hbutton';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCheck, faExclamationCircle, faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport Error from './error';\r\n\r\nexport default class HButtonOnce extends Component {\r\n\trender() {\r\n\t\tif(this.props.status === \"waiting\") {\r\n\t\t\treturn <HButton label={<span>{this.props.label}</span>} onClick={this.props.onClick}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"running\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faSpinner} pulse={true}/> {this.props.label}</span>} disabled={true}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"done\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faCheck}/> {this.props.label}</span>} disabled={true}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"error\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faExclamationCircle}/> {this.props.label}</span>} onClick={this.props.onClick}/>;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <Error>Invalid status for HButtonOnce: {this.props.status.toString()}</Error>\r\n\t\t}\r\n\t}\r\n}\r\n","import { Component } from 'preact';\nimport Box from './box';\n\nexport default class UserInfoBox extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Box left={\"Informazioni tecniche\"}>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>ID: <b>{this.props.user.uid}</b></li>\n\t\t\t\t\t<li>Tipo utente: <b>{this.props.user.role}</b></li>\n\t\t\t\t</ul>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"invisitable\":\"invisitable__2BeJv\"};","import { Component } from 'preact';\r\nimport style from './success.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Success extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.successcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fiorygi\":\"fiorygi__3fQ-S\",\"transactiontable\":\"transactiontable__3P0fZ\",\"amount\":\"amount__2Nl11\",\"positive\":\"positive__3nc4y\",\"negative\":\"negative__1SDlm\"};","import { Component } from 'preact';\r\nimport Box from './box';\r\nimport HButton from './hbutton';\r\n\r\nexport default class LogoutBox extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Box left={\"Logout\"}>\r\n\t\t\t\t<HButton label={\"Logout\"} onClick={this.props.onLogoutClick}/>\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport style from './changeNumber.less';\r\n\r\nexport default class ChangeNumber extends Component {\r\n\trender() {\r\n\t\tlet colorClass;\r\n\t\tlet additionalText = \"\";\r\n\t\tif(this.props.children > 0) {\r\n\t\t\tcolorClass = style.positive;\r\n\t\t\tadditionalText = \"+\";\r\n\t\t}\r\n\t\telse if(this.props.children === 0) {\r\n\t\t\tcolorClass = style.neutral;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcolorClass = style.negative;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<span class={style.changenumber + \" \" + colorClass + \" \" + this.props.class}>\r\n\t\t\t\t{additionalText}{this.props.children}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport Loading from './loading';\r\nimport Box from './box';\r\nimport style from './fiorygiBox.less';\r\nimport InvisiTable from './invisiTable';\r\nimport ChangeNumber from './changeNumber';\r\n\r\nexport default class FiorygiBox extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"data\": null\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tfetch(`https://rygapi.steffo.eu/api/user/fiorygi/get/v1?id=${this.props.user.uid}`).then(response => response.json()).then((j) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\t\"data\": j.data\r\n\t\t\t});\r\n\t\t})\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet contents = <Loading/>;\r\n\r\n\t\tif(this.state.data !== null) {\r\n\t\t\tlet tablerows = this.state.data.transactions.map((t, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t<td class={style.amount}><ChangeNumber>{t.change}</ChangeNumber></td>\r\n\t\t\t\t\t\t<td>{t.reason}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\tcontents = (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<InvisiTable class={style.transactiontable}>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr class={style.fiorygi}>\r\n\t\t\t\t\t\t\t\t<td class={style.amount}><ChangeNumber>{this.state.data.fiorygi}</ChangeNumber></td>\r\n\t\t\t\t\t\t\t\t<td>fiorygi totali</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t{tablerows}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</InvisiTable>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Box left={\"Fiorygi\"}>\r\n\t\t\t\t{contents}\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"successcolor\":\"successcolor__1EkSB\"};","import { Component } from 'preact';\nimport Loading from '../components/loading';\nimport MainTitle from '../components/maintitle';\nimport ChangePasswordBox from '../components/changepasswordbox';\nimport UserInfoBox from '../components/userInfoBox';\nimport Box from '../components/box';\nimport LogoutBox from '../components/logoutBox';\nimport FiorygiBox from '../components/fiorygiBox';\n\nexport default class UserProfile extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"data\": null,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif(this.props.userId) {\n\t\t\tthis.getData();\n\t\t}\n\t}\n\n\tcomponentDidUpdate(previousProps, previousState, snapshot) {\n\t\tif(previousProps.userId !== this.props.userId && this.props.userId) {\n\t\t\tthis.getData();\n\t\t}\n\t}\n\n\tgetData = () => {\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.userId).then((response) => {\n\t\t\treturn response.json();\n\t\t}).then((json) => {\n\t\t\tthis.setState({\"data\": json.data});\n\t\t})\n\t};\n\n\trender() {\n\t\tlet thisIsMyProfile = (this.props.loggedIn && this.props.userId === this.props.loggedIn.user.uid);\n\n\t\tif(this.state.data === null) {\n\t\t\treturn <Box left={\"Caricamento...\"}><Loading/></Box>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"👤\"} text={this.state.data.username}/>\n\t\t\t\t<FiorygiBox user={this.state.data}/>\n\t\t\t\t<UserInfoBox user={this.state.data}/>\n\t\t\t\t{thisIsMyProfile ? <ChangePasswordBox loggedIn={this.props.loggedIn}/> : \"\"}\n\t\t\t\t{thisIsMyProfile ? <LogoutBox onLogoutClick={this.props.onLogoutClick}/> : \"\"}\n\t\t\t</div>\n\t\t)\n\n\t}\n}\n","import { Component } from 'preact';\r\nimport style from './invisiTable.less';\r\n\r\nexport default class InvisiTable extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<table class={style.invisitable + \" \" + this.props.class}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</table>\r\n\t\t);\r\n\t}\r\n}\r\n"],"sourceRoot":""}