{"version":3,"sources":["webpack:///./components/changepasswordbox.js","webpack:///./components/maintitle.less","webpack:///./components/userInfoBox.js","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js"],"names":["ChangePasswordBox","onPasswordInputChange","e","setState","target","value","onButtonClick","fetch","method","body","JSON","stringify","props","loggedIn","token","state","new_password","then","response","json","data","revoked_tokens","render","left","label","type","this","onChange","disabled","status","onClick","Component","module","exports","UserInfoBox","user","uid","role","Success","class","style","successcolor","icon","faCheckCircle","children","MainTitle","title","image","src","imgsrc","alt","imgalt","text","UserProfile","getData","userId","componentDidMount","thisIsMyProfile","username"],"mappings":"0MAMqBA,E,YACpB,aAAc,aACb,sBAQDC,sBAAwB,SAAAC,GACvB,EAAKC,SAAS,CACb,aAAgBD,EAAEE,OAAOC,SAXb,EAedC,cAAgB,WACf,EAAKH,SAAS,CACb,OAAU,YAGXI,MAAM,+CAAgD,CACrDC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACpB,MAAS,EAAKC,MAAMC,SAASC,MAC7B,aAAgB,EAAKC,MAAMC,iBAE1BC,MAAK,SAACC,GACR,OAAOA,EAASC,UACdF,MAAK,SAACE,GACR,EAAKhB,SAAS,CACb,OAAU,OACV,eAAkBgB,EAAKC,KAAKC,qBA7B9B,EAAKN,MAAQ,CACZ,aAAgB,KAChB,OAAU,UACV,eAAkB,MALN,E,kHAoCdO,OAAA,WAGC,OACC,EAAC,IAAD,CAAKC,KAAM,mBAEV,EAAC,IAAD,CACCC,MAAO,iBACPC,KAAM,WACNpB,MAAOqB,KAAKX,MAAMC,aAClBW,SAAUD,KAAKzB,sBACf2B,SAVwC,YAAtBF,KAAKX,MAAMc,SAY9B,EAAC,IAAD,CACCL,MAAO,kBACPM,QAASJ,KAAKpB,cACduB,OAAQH,KAAKX,MAAMc,SAGG,SAAtBH,KAAKX,MAAMc,OACT,EAAC,IAAD,yFAA2FH,KAAKX,MAAMM,eAAtG,aACA,K,GA1DwCU,e,yCCL/CC,EAAOC,QAAU,CAAC,MAAQ,eAAe,MAAQ,eAAe,KAAO,gB,6GCElDC,E,gLACpBZ,OAAA,WACC,OACC,EAAC,IAAD,CAAKC,KAAM,gBACV,YACC,mBAAQ,WAAIG,KAAKd,MAAMuB,KAAKC,MAC5B,4BAAiB,WAAIV,KAAKd,MAAMuB,KAAKE,U,GANDN,e,sKCEpBO,E,gLACpBhB,OAAA,WACC,OACC,SAAKiB,MAAOC,IAAMC,cACjB,EAAC,IAAD,CAAiBC,KAAMC,MADxB,IAC0CjB,KAAKd,MAAMgC,W,GAJnBb,e,8ICFhBc,E,gLACjBvB,OAAA,WACI,OACI,SAAKiB,MAAOC,IAAMM,OACd,SAAKP,MAAOC,IAAMO,MAAOC,IAAKtB,KAAKd,MAAMqC,OAAQC,IAAKxB,KAAKd,MAAMuC,SACjE,UAAMZ,MAAOC,IAAMY,MAAnB,IACW1B,KAAKd,MAAMwC,Q,GANCrB,e,yCCFvCC,EAAOC,QAAU,CAAC,aAAe,wB,yKCMZoB,E,YACpB,aAAc,aACb,sBAUDC,QAAU,WACT/C,MAAM,+CAAiD,EAAKK,MAAM2C,QAAQtC,MAAK,SAACC,GAC/E,OAAOA,EAASC,UACdF,MAAK,SAACE,GACR,EAAKhB,SAAS,CAAC,KAAQgB,EAAKC,WAb7B,EAAKL,MAAQ,CACZ,KAAQ,MAHI,E,0HAOdyC,kBAAA,WACC9B,KAAK4B,W,EAWNhC,OAAA,WACC,IAAImC,EAAmB/B,KAAKd,MAAMC,UAAYa,KAAKd,MAAM2C,SAAW7B,KAAKd,MAAMC,SAASsB,KAAKC,IAE7F,OAAuB,OAApBV,KAAKX,MAAMK,KACN,EAAC,IAAD,CAAKG,KAAM,kBAAkB,EAAC,IAAD,OAIpC,aACC,EAAC,IAAD,CAAW0B,OAAQ,mDAAoDE,OAAQ,KAAMC,KAAM1B,KAAKX,MAAMK,KAAKsC,WAC3G,EAAC,IAAD,CAAavB,KAAMT,KAAKX,MAAMK,OAC7BqC,EAAkB,EAAC,IAAD,CAAmB5C,SAAUa,KAAKd,MAAMC,WAAc,K,GA/BpCkB,c","file":"4.chunk.9fe3c.js","sourcesContent":["import { Component } from 'preact';\r\nimport HInput from './hinput';\r\nimport HButtonOnce from './hbuttononce';\r\nimport Success from './success';\r\nimport Box from './box';\r\n\r\nexport default class ChangePasswordBox extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"new_password\": null,\r\n\t\t\t\"status\": \"waiting\",\r\n\t\t\t\"revoked_tokens\": null\r\n\t\t};\r\n\t}\r\n\r\n\tonPasswordInputChange = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"new_password\": e.target.value\r\n\t\t})\r\n\t};\r\n\r\n\tonButtonClick = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"status\": \"running\"\r\n\t\t});\r\n\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\"token\": this.props.loggedIn.token,\r\n\t\t\t\t\"new_password\": this.state.new_password\r\n\t\t\t})\r\n\t\t}).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\t\"status\": \"done\",\r\n\t\t\t\t\"revoked_tokens\": json.data.revoked_tokens\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet inputDisabled = (this.state.status !== \"waiting\");\r\n\r\n\t\treturn (\r\n\t\t\t<Box left={\"Cambia password\"}>\r\n\r\n\t\t\t\t<HInput\r\n\t\t\t\t\tlabel={\"Nuova password\"}\r\n\t\t\t\t\ttype={\"password\"}\r\n\t\t\t\t\tvalue={this.state.new_password}\r\n\t\t\t\t\tonChange={this.onPasswordInputChange}\r\n\t\t\t\t\tdisabled={inputDisabled}/>\r\n\r\n\t\t\t\t<HButtonOnce\r\n\t\t\t\t\tlabel={\"Cambia password\"}\r\n\t\t\t\t\tonClick={this.onButtonClick}\r\n\t\t\t\t\tstatus={this.state.status}/>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.status === \"done\"\r\n\t\t\t\t\t? <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.revoked_tokens} accessi.</Success>\r\n\t\t\t\t\t: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","import { Component } from 'preact';\r\nimport Box from './box';\r\n\r\nexport default class UserInfoBox extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Box left={\"Informazioni\"}>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>ID: <b>{this.props.user.uid}</b></li>\r\n\t\t\t\t\t<li>Tipo utente: <b>{this.props.user.role}</b></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport style from './success.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Success extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.successcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"successcolor\":\"successcolor__1EkSB\"};","import { Component } from 'preact';\r\nimport Loading from '../components/loading';\r\nimport MainTitle from '../components/maintitle';\r\nimport ChangePasswordBox from '../components/changepasswordbox';\r\nimport UserInfoBox from '../components/userInfoBox';\r\nimport Box from '../components/box';\r\n\r\nexport default class UserProfile extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"data\": null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.userId).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\"data\": json.data});\r\n\t\t})\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet thisIsMyProfile = (this.props.loggedIn && this.props.userId === this.props.loggedIn.user.uid);\r\n\r\n\t\tif(this.state.data === null) {\r\n\t\t\treturn <Box left={\"Caricamento...\"}><Loading/></Box>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"ðŸ‘¤\"} text={this.state.data.username}/>\r\n\t\t\t\t<UserInfoBox user={this.state.data}/>\r\n\t\t\t\t{thisIsMyProfile ? <ChangePasswordBox loggedIn={this.props.loggedIn}/> : \"\"}\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t}\r\n}\r\n"],"sourceRoot":""}