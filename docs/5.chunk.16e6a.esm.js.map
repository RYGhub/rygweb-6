{"version":3,"sources":["webpack:///./components/hbutton.less","webpack:///./components/hinput.less","webpack:///./components/error.less","webpack:///./components/box.js","webpack:///./components/box.less","webpack:///./components/loading.js","webpack:///./components/hbutton.js","webpack:///./components/hinput.js","webpack:///./components/maintitle.less","webpack:///./components/hbuttononce.js","webpack:///./components/error.js","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js"],"names":["module","exports","Box","Component","render","inside","undefined","this","props","left","center","right","class","style","top","className","bottom","children","single","box","Loading","icon","faSpinner","pulse","text","HButton","button","state","disabled","onClick","label","HInput","input","type","value","onChange","HButtonOnce","status","faCheck","toString","Error","errorcolor","faExclamationCircle","Success","successcolor","faCheckCircle","MainTitle","title","image","src","imgsrc","alt","imgalt","UserProfile","constructor","super","getData","fetch","user_id","then","response","json","setState","data","onNewPasswordChange","e","target","onPasswordChangeClick","method","body","JSON","stringify","loggedIn","token","password_change_new_password","revoked_tokens","componentDidMount","passwordChangeBox","user","uid","passwordChangeContents","password_change_status","password_change_revoked_tokens","username"],"mappings":"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","file":"5.chunk.16e6a.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"label__27Ou6\",\"text\":\"text__23o12\",\"button\":\"button__1RPJ4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"label__1bOQ9\",\"text\":\"text__VeEJL\",\"input\":\"input__3QDx6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorcolor\":\"errorcolor__2pLmg\"};","import { Component } from 'preact';\nimport style from './box.less';\n\n\nexport default class Box extends Component {\n\trender() {\n\t\tlet inside = null;\n\t\tif(this.props.left !== undefined || this.props.center !== undefined || this.props.right !== undefined) {\n\t\t\tinside = [\n\t\t\t<div class={style.top}>\n\t\t\t\t{this.props.left !== undefined ? <div className={style.left}>{this.props.left}</div> : null}\n\t\t\t\t{this.props.center !== undefined ? <div class={style.center}>{this.props.center}</div> : null}\n\t\t\t\t{this.props.right !== undefined ? <div class={style.right}>{this.props.right}</div> : null}\n\t\t\t</div>,\n\t\t\t<div class={style.bottom}>{this.props.children}</div>\n\t\t]\n\t\t}\n\t\telse {\n\t\t\tinside = <div class={style.single}>{this.props.children}</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<div class={style.box}>\n\t\t\t\t{inside}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"box__2NdQS\",\"single\":\"single__1Lrvl\",\"top\":\"top__mNBcY\",\"bottom\":\"bottom__1LEQj\",\"left\":\"left__3v69C\",\"center\":\"center__2w2JR\",\"right\":\"right__3mYf_\"};","import { Component } from 'preact';\r\nimport style from './loading.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Loading extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<FontAwesomeIcon icon={faSpinner} pulse={true}/> {this.props.text ? this.props.text : \"Loading...\"}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport style from './hbutton.less';\r\n\r\nexport default class HButton extends Component {\r\n\trender() {\r\n\t\tlet button;\r\n\t\tif(this.state.disabled) {\r\n\t\t\tbutton = <button className={style.button} disabled={true}>{this.props.label}</button>;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbutton = <button className={style.button} onClick={this.props.onClick}>{this.props.label}</button>\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<label className={style.label}>\r\n\t\t\t\t<div className={style.text}/>\r\n\t\t\t\t{button}\r\n\t\t\t</label>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport style from './hinput.less';\r\n\r\nexport default class HInput extends Component {\r\n\trender() {\r\n\t\t//TODO: eww il label è un pixel più in alto dell'input\r\n\t\treturn (\r\n\t\t\t<label class={style.label}>\r\n\t\t\t\t<div class={style.text}>{this.props.label}</div>\r\n\t\t\t\t<input class={style.input} type={this.props.type} value={this.props.value} onChange={this.props.onChange} disabled={this.props.disabled}/>\r\n\t\t\t</label>\r\n\t\t);\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","import { Component } from 'preact';\r\nimport style from './hbuttononce.less';\r\nimport HButton from './hbutton';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCheck, faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport Error from './error';\r\n\r\nexport default class HButtonOnce extends Component {\r\n\trender() {\r\n\t\tif(this.props.status === \"waiting\") {\r\n\t\t\treturn <HButton label={<span>{this.props.label}</span>} onClick={this.props.onClick}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"running\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faSpinner} pulse={true}/> {this.props.label}</span>} disabled={true}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"done\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faCheck}/> {this.props.label}</span>} disabled={true}/>;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <Error>Invalid status for HButtonOnce: {this.props.status.toString()}</Error>\r\n\t\t}\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport style from './error.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faExclamationCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Error extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.errorcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faExclamationCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport style from './success.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Success extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.successcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"successcolor\":\"successcolor__1EkSB\"};","import { Component } from 'preact';\r\nimport style from './userprofile.less';\r\nimport Loading from '../components/loading';\r\nimport Box from '../components/box';\r\nimport MainTitle from '../components/maintitle';\r\nimport HInput from '../components/hinput';\r\nimport HButtonOnce from '../components/hbuttononce';\r\nimport HButton from '../components/hbutton';\r\nimport Success from '../components/success';\r\n\r\nexport default class UserProfile extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"data\": null,\r\n\t\t\t\"password_change_new_password\": null,\r\n\t\t\t\"password_change_status\": \"waiting\",\r\n\t\t\t\"password_change_revoked_tokens\": null\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.user_id).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\"data\": json.data});\r\n\t\t})\r\n\t};\r\n\r\n\tonNewPasswordChange = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"password_change_new_password\": e.target.value\r\n\t\t})\r\n\t};\r\n\r\n\tonPasswordChangeClick = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"password_change_status\": \"running\"\r\n\t\t});\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\"token\": this.props.loggedIn.token,\r\n\t\t\t\t\"new_password\": this.state.password_change_new_password\r\n\t\t\t})\r\n\t\t}).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\t\"password_change_status\": \"done\",\r\n\t\t\t\t\"password_change_revoked_tokens\": json.data.revoked_tokens\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tif(this.state.data === null) {\r\n\t\t\treturn <Loading/>;\r\n\t\t}\r\n\r\n\t\tlet passwordChangeBox = \"\";\r\n\t\tif(this.props.loggedIn && this.props.loggedIn.user.uid === this.props.user_id) {\r\n\t\t\tlet passwordChangeContents;\r\n\t\t\tif(this.state.password_change_status === \"waiting\") {\r\n\t\t\t\tpasswordChangeContents = (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<HInput label={\"Nuova password\"} type={\"password\"} value={this.state.password_change_new_password} onChange={this.onNewPasswordChange}/>\r\n\t\t\t\t\t\t<HButton label={\"Cambia password\"} onClick={this.onPasswordChangeClick}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\telse if(this.state.password_change_status === \"running\") {\r\n\t\t\t\tpasswordChangeContents = <Loading text={\"Cambio password in corso...\"}/>\r\n\t\t\t}\r\n\t\t\telse if(this.state.password_change_status === \"done\") {\r\n\t\t\t\tpasswordChangeContents = <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.password_change_revoked_tokens} accessi.</Success>\r\n\t\t\t}\r\n\t\t\tpasswordChangeBox = <Box left={\"Cambia password\"}>{passwordChangeContents}</Box>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"👤\"} text={this.state.data.username}/>\r\n\t\t\t\t{passwordChangeBox}\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t}\r\n}\r\n"],"sourceRoot":""}