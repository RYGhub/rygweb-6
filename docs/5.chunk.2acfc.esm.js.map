{"version":3,"sources":["webpack:///./components/changepasswordbox.js","webpack:///./components/maintitle.less","webpack:///./components/userInfoBox.js","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js"],"names":["ChangePasswordBox","Component","constructor","super","onPasswordInputChange","e","this","setState","target","value","onButtonClick","fetch","method","body","JSON","stringify","props","loggedIn","token","state","new_password","then","response","json","data","revoked_tokens","render","left","label","type","onChange","disabled","status","onClick","module","exports","UserInfoBox","user","uid","role","Success","class","style","successcolor","icon","faCheckCircle","children","MainTitle","title","image","src","imgsrc","alt","imgalt","text","UserProfile","getData","userId","componentDidMount","thisIsMyProfile","username"],"mappings":"4FAAA,8GAMe,MAAMA,UAA0BC,YAC9CC,cACCC,QADa,KASdC,sBAAwBC,IACvBC,KAAKC,SAAS,CACb,aAAgBF,EAAEG,OAAOC,SAXb,KAedC,cAAgBL,KACfC,KAAKC,SAAS,CACb,OAAU,YAGXI,MAAM,+CAAgD,CACrDC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACpB,MAAST,KAAKU,MAAMC,SAASC,MAC7B,aAAgBZ,KAAKa,MAAMC,iBAE1BC,KAAMC,GACDA,EAASC,QACdF,KAAME,IACRjB,KAAKC,SAAS,CACb,OAAU,OACV,eAAkBgB,EAAKC,KAAKC,oBA7B9BnB,KAAKa,MAAQ,CACZ,aAAgB,KAChB,OAAU,UACV,eAAkB,MA+BpBO,SAGC,OACC,EAAC,IAAD,CAAKC,KAAM,mBAEV,EAAC,IAAD,CACCC,MAAO,iBACPC,KAAM,WACNpB,MAAOH,KAAKa,MAAMC,aAClBU,SAAUxB,KAAKF,sBACf2B,SAVwC,YAAtBzB,KAAKa,MAAMa,SAY9B,EAAC,IAAD,CACCJ,MAAO,kBACPK,QAAS3B,KAAKI,cACdsB,OAAQ1B,KAAKa,MAAMa,SAGG,SAAtB1B,KAAKa,MAAMa,OACT,EAAC,IAAD,yFAA2F1B,KAAKa,MAAMM,eAAtG,aACA,Q,yCC/DPS,EAAOC,QAAU,CAAC,MAAQ,eAAe,MAAQ,eAAe,KAAO,gB,mCCDvE,0EAGe,MAAMC,UAAoBnC,YACxCyB,SACC,OACC,EAAC,IAAD,CAAKC,KAAM,gBACV,YACC,mBAAQ,WAAIrB,KAAKU,MAAMqB,KAAKC,MAC5B,4BAAiB,WAAIhC,KAAKU,MAAMqB,KAAKE,a,2DCT1C,2GAKe,MAAMC,UAAgBvC,YACpCyB,SACC,OACC,SAAKe,MAAOC,IAAMC,cACjB,EAAC,IAAD,CAAiBC,KAAMC,MADxB,IAC0CvC,KAAKU,MAAM8B,c,2DCTxD,mFAGe,MAAMC,UAAkB9C,YACnCyB,SACI,OACI,SAAKe,MAAOC,IAAMM,OACd,SAAKP,MAAOC,IAAMO,MAAOC,IAAK5C,KAAKU,MAAMmC,OAAQC,IAAK9C,KAAKU,MAAMqC,SACjE,UAAMZ,MAAOC,IAAMY,MAAnB,IACWhD,KAAKU,MAAMsC,W,yCCRtCpB,EAAOC,QAAU,CAAC,aAAe,wB,kCCDjC,uIAOe,MAAMoB,UAAoBtD,YACxCC,cACCC,QADa,KAWdqD,QAAU,KACT7C,MAAM,+CAAiDL,KAAKU,MAAMyC,QAAQpC,KAAMC,GACxEA,EAASC,QACdF,KAAME,IACRjB,KAAKC,SAAS,CAAC,KAAQgB,EAAKC,UAb7BlB,KAAKa,MAAQ,CACZ,KAAQ,MAIVuC,oBACCpD,KAAKkD,UAWN9B,SACC,IAAIiC,EAAmBrD,KAAKU,MAAMC,UAAYX,KAAKU,MAAMyC,SAAWnD,KAAKU,MAAMC,SAASoB,KAAKC,IAE7F,OAAuB,OAApBhC,KAAKa,MAAMK,KACN,EAAC,IAAD,CAAKG,KAAM,kBAAkB,EAAC,IAAD,OAIpC,aACC,EAAC,IAAD,CAAWwB,OAAQ,mDAAoDE,OAAQ,KAAMC,KAAMhD,KAAKa,MAAMK,KAAKoC,WAC3G,EAAC,IAAD,CAAavB,KAAM/B,KAAKa,MAAMK,OAC7BmC,EAAkB,EAAC,IAAD,CAAmB1C,SAAUX,KAAKU,MAAMC,WAAc,O","file":"5.chunk.2acfc.esm.js","sourcesContent":["import { Component } from 'preact';\nimport HInput from './hinput';\nimport HButtonOnce from './hbuttononce';\nimport Success from './success';\nimport Box from './box';\n\nexport default class ChangePasswordBox extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"new_password\": null,\n\t\t\t\"status\": \"waiting\",\n\t\t\t\"revoked_tokens\": null\n\t\t};\n\t}\n\n\tonPasswordInputChange = e => {\n\t\tthis.setState({\n\t\t\t\"new_password\": e.target.value\n\t\t})\n\t};\n\n\tonButtonClick = e => {\n\t\tthis.setState({\n\t\t\t\"status\": \"running\"\n\t\t});\n\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify({\n\t\t\t\t\"token\": this.props.loggedIn.token,\n\t\t\t\t\"new_password\": this.state.new_password\n\t\t\t})\n\t\t}).then((response) => {\n\t\t\treturn response.json();\n\t\t}).then((json) => {\n\t\t\tthis.setState({\n\t\t\t\t\"status\": \"done\",\n\t\t\t\t\"revoked_tokens\": json.data.revoked_tokens\n\t\t\t});\n\t\t});\n\t};\n\n\trender() {\n\t\tlet inputDisabled = (this.state.status !== \"waiting\");\n\n\t\treturn (\n\t\t\t<Box left={\"Cambia password\"}>\n\n\t\t\t\t<HInput\n\t\t\t\t\tlabel={\"Nuova password\"}\n\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\tvalue={this.state.new_password}\n\t\t\t\t\tonChange={this.onPasswordInputChange}\n\t\t\t\t\tdisabled={inputDisabled}/>\n\n\t\t\t\t<HButtonOnce\n\t\t\t\t\tlabel={\"Cambia password\"}\n\t\t\t\t\tonClick={this.onButtonClick}\n\t\t\t\t\tstatus={this.state.status}/>\n\n\t\t\t\t{\n\t\t\t\t\tthis.state.status === \"done\"\n\t\t\t\t\t? <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.revoked_tokens} accessi.</Success>\n\t\t\t\t\t: \"\"\n\t\t\t\t}\n\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","import { Component } from 'preact';\nimport Box from './box';\n\nexport default class UserInfoBox extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Box left={\"Informazioni\"}>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>ID: <b>{this.props.user.uid}</b></li>\n\t\t\t\t\t<li>Tipo utente: <b>{this.props.user.role}</b></li>\n\t\t\t\t</ul>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","import { Component } from 'preact';\r\nimport style from './success.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Success extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.successcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"successcolor\":\"successcolor__1EkSB\"};","import { Component } from 'preact';\nimport Loading from '../components/loading';\nimport MainTitle from '../components/maintitle';\nimport ChangePasswordBox from '../components/changepasswordbox';\nimport UserInfoBox from '../components/userInfoBox';\nimport Box from '../components/box';\n\nexport default class UserProfile extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"data\": null,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getData();\n\t}\n\n\tgetData = () => {\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.userId).then((response) => {\n\t\t\treturn response.json();\n\t\t}).then((json) => {\n\t\t\tthis.setState({\"data\": json.data});\n\t\t})\n\t};\n\n\trender() {\n\t\tlet thisIsMyProfile = (this.props.loggedIn && this.props.userId === this.props.loggedIn.user.uid);\n\n\t\tif(this.state.data === null) {\n\t\t\treturn <Box left={\"Caricamento...\"}><Loading/></Box>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"ðŸ‘¤\"} text={this.state.data.username}/>\n\t\t\t\t<UserInfoBox user={this.state.data}/>\n\t\t\t\t{thisIsMyProfile ? <ChangePasswordBox loggedIn={this.props.loggedIn}/> : \"\"}\n\t\t\t</div>\n\t\t)\n\n\t}\n}\n"],"sourceRoot":""}