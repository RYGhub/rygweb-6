{"version":3,"sources":["webpack:///./components/actionboxes/changepasswordbox.js","webpack:///./components/loading.js","webpack:///./components/maintitle.less","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js"],"names":["ChangePasswordBox","onPasswordInputChange","e","setState","target","value","onButtonClick","fetch","method","body","JSON","stringify","props","loggedIn","token","state","new_password","then","response","json","data","revoked_tokens","render","left","label","type","this","onChange","disabled","status","onClick","Component","Loading","icon","faSpinner","pulse","text","module","exports","Success","class","style","successcolor","faCheckCircle","children","MainTitle","title","image","src","imgsrc","alt","imgalt","UserProfile","getData","user_id","componentDidMount","thisIsMyProfile","user","uid","username"],"mappings":"4MAMqBA,E,YACpB,aAAc,aACb,sBAQDC,sBAAwB,SAAAC,GACvB,EAAKC,SAAS,CACb,aAAgBD,EAAEE,OAAOC,SAXb,EAedC,cAAgB,WACf,EAAKH,SAAS,CACb,OAAU,YAGXI,MAAM,+CAAgD,CACrDC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACpB,MAAS,EAAKC,MAAMC,SAASC,MAC7B,aAAgB,EAAKC,MAAMC,iBAE1BC,MAAK,SAACC,GACR,OAAOA,EAASC,UACdF,MAAK,SAACE,GACR,EAAKhB,SAAS,CACb,OAAU,OACV,eAAkBgB,EAAKC,KAAKC,qBA7B9B,EAAKN,MAAQ,CACZ,aAAgB,KAChB,OAAU,UACV,eAAkB,MALN,E,kHAoCdO,OAAA,WAGC,OACC,EAAC,IAAD,CAAKC,KAAM,mBAEV,EAAC,IAAD,CACCC,MAAO,iBACPC,KAAM,WACNpB,MAAOqB,KAAKX,MAAMC,aAClBW,SAAUD,KAAKzB,sBACf2B,SAVwC,YAAtBF,KAAKX,MAAMc,SAY9B,EAAC,IAAD,CACCL,MAAO,kBACPM,QAASJ,KAAKpB,cACduB,OAAQH,KAAKX,MAAMc,SAGG,SAAtBH,KAAKX,MAAMc,OACT,EAAC,IAAD,yFAA2FH,KAAKX,MAAMM,eAAtG,aACA,K,GA1DwCU,e,iJCF1BC,E,gLACpBV,OAAA,WACC,OACC,cACC,EAAC,IAAD,CAAiBW,KAAMC,IAAWC,OAAO,IAD1C,IACmDT,KAAKd,MAAMwB,KAAOV,KAAKd,MAAMwB,KAAO,e,GAJrDL,e,yCCHrCM,EAAOC,QAAU,CAAC,MAAQ,eAAe,MAAQ,eAAe,KAAO,gB,8ICIlDC,E,gLACpBjB,OAAA,WACC,OACC,SAAKkB,MAAOC,IAAMC,cACjB,EAAC,IAAD,CAAiBT,KAAMU,MADxB,IAC0CjB,KAAKd,MAAMgC,W,GAJnBb,e,8ICFhBc,E,gLACjBvB,OAAA,WACI,OACI,SAAKkB,MAAOC,IAAMK,OACd,SAAKN,MAAOC,IAAMM,MAAOC,IAAKtB,KAAKd,MAAMqC,OAAQC,IAAKxB,KAAKd,MAAMuC,SACjE,UAAMX,MAAOC,IAAML,MAAnB,IACWV,KAAKd,MAAMwB,Q,GANCL,e,yCCFvCM,EAAOC,QAAU,CAAC,aAAe,wB,iJCIZc,E,YACpB,aAAc,aACb,sBAUDC,QAAU,WACT9C,MAAM,+CAAiD,EAAKK,MAAM0C,SAASrC,MAAK,SAACC,GAChF,OAAOA,EAASC,UACdF,MAAK,SAACE,GACR,EAAKhB,SAAS,CAAC,KAAQgB,EAAKC,WAb7B,EAAKL,MAAQ,CACZ,KAAQ,MAHI,E,0HAOdwC,kBAAA,WACC7B,KAAK2B,W,EAWN/B,OAAA,WACC,IAAIkC,EAAmB9B,KAAKd,MAAMC,UAAYa,KAAKd,MAAM0C,UAAY5B,KAAKd,MAAMC,SAAS4C,KAAKC,IAE9F,OAAuB,OAApBhC,KAAKX,MAAMK,KACN,EAAC,IAAD,MAIP,aACC,EAAC,IAAD,CAAW6B,OAAQ,mDAAoDE,OAAQ,KAAMf,KAAMV,KAAKX,MAAMK,KAAKuC,WAC1GH,EAAkB,EAAC,IAAD,CAAmB3C,SAAUa,KAAKd,MAAMC,WAAc,K,GA9BpCkB,c","file":"5.chunk.5854e.js","sourcesContent":["import { Component } from 'preact';\r\nimport HInput from '../forms/hinput';\r\nimport HButtonOnce from '../forms/hbuttononce';\r\nimport Success from '../success';\r\nimport Box from '../box';\r\n\r\nexport default class ChangePasswordBox extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"new_password\": null,\r\n\t\t\t\"status\": \"waiting\",\r\n\t\t\t\"revoked_tokens\": null\r\n\t\t};\r\n\t}\r\n\r\n\tonPasswordInputChange = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"new_password\": e.target.value\r\n\t\t})\r\n\t};\r\n\r\n\tonButtonClick = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"status\": \"running\"\r\n\t\t});\r\n\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\"token\": this.props.loggedIn.token,\r\n\t\t\t\t\"new_password\": this.state.new_password\r\n\t\t\t})\r\n\t\t}).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\t\"status\": \"done\",\r\n\t\t\t\t\"revoked_tokens\": json.data.revoked_tokens\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet inputDisabled = (this.state.status !== \"waiting\");\r\n\r\n\t\treturn (\r\n\t\t\t<Box left={\"Cambia password\"}>\r\n\r\n\t\t\t\t<HInput\r\n\t\t\t\t\tlabel={\"Nuova password\"}\r\n\t\t\t\t\ttype={\"password\"}\r\n\t\t\t\t\tvalue={this.state.new_password}\r\n\t\t\t\t\tonChange={this.onPasswordInputChange}\r\n\t\t\t\t\tdisabled={inputDisabled}/>\r\n\r\n\t\t\t\t<HButtonOnce\r\n\t\t\t\t\tlabel={\"Cambia password\"}\r\n\t\t\t\t\tonClick={this.onButtonClick}\r\n\t\t\t\t\tstatus={this.state.status}/>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.status === \"done\"\r\n\t\t\t\t\t? <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.revoked_tokens} accessi.</Success>\r\n\t\t\t\t\t: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Loading extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<FontAwesomeIcon icon={faSpinner} pulse={true}/> {this.props.text ? this.props.text : \"Loading...\"}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","import { Component } from 'preact';\r\nimport style from './success.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Success extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.successcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"successcolor\":\"successcolor__1EkSB\"};","import { Component } from 'preact';\r\nimport Loading from '../components/loading';\r\nimport MainTitle from '../components/maintitle';\r\nimport ChangePasswordBox from '../components/actionboxes/changepasswordbox';\r\n\r\nexport default class UserProfile extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"data\": null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.user_id).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\"data\": json.data});\r\n\t\t})\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet thisIsMyProfile = (this.props.loggedIn && this.props.user_id === this.props.loggedIn.user.uid);\r\n\r\n\t\tif(this.state.data === null) {\r\n\t\t\treturn <Loading/>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"ðŸ‘¤\"} text={this.state.data.username}/>\r\n\t\t\t\t{thisIsMyProfile ? <ChangePasswordBox loggedIn={this.props.loggedIn}/> : \"\"}\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t}\r\n}\r\n"],"sourceRoot":""}