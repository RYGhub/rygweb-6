{"version":3,"sources":["webpack:///./components/actionboxes/changepasswordbox.js","webpack:///./components/loading.js","webpack:///./components/maintitle.less","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js"],"names":["ChangePasswordBox","Component","constructor","super","onPasswordInputChange","e","this","setState","target","value","onButtonClick","fetch","method","body","JSON","stringify","props","loggedIn","token","state","new_password","then","response","json","data","revoked_tokens","render","left","label","type","onChange","disabled","status","onClick","Loading","icon","faSpinner","pulse","text","module","exports","Success","class","style","successcolor","faCheckCircle","children","MainTitle","title","image","src","imgsrc","alt","imgalt","UserProfile","getData","user_id","componentDidMount","thisIsMyProfile","user","uid","username"],"mappings":"8FAAA,8GAMe,MAAMA,UAA0BC,YAC9CC,cACCC,QADa,KASdC,sBAAwBC,IACvBC,KAAKC,SAAS,CACb,aAAgBF,EAAEG,OAAOC,SAXb,KAedC,cAAgBL,KACfC,KAAKC,SAAS,CACb,OAAU,YAGXI,MAAM,+CAAgD,CACrDC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACpB,MAAST,KAAKU,MAAMC,SAASC,MAC7B,aAAgBZ,KAAKa,MAAMC,iBAE1BC,KAAMC,GACDA,EAASC,QACdF,KAAME,IACRjB,KAAKC,SAAS,CACb,OAAU,OACV,eAAkBgB,EAAKC,KAAKC,oBA7B9BnB,KAAKa,MAAQ,CACZ,aAAgB,KAChB,OAAU,UACV,eAAkB,MA+BpBO,SAGC,OACC,EAAC,IAAD,CAAKC,KAAM,mBAEV,EAAC,IAAD,CACCC,MAAO,iBACPC,KAAM,WACNpB,MAAOH,KAAKa,MAAMC,aAClBU,SAAUxB,KAAKF,sBACf2B,SAVwC,YAAtBzB,KAAKa,MAAMa,SAY9B,EAAC,IAAD,CACCJ,MAAO,kBACPK,QAAS3B,KAAKI,cACdsB,OAAQ1B,KAAKa,MAAMa,SAGG,SAAtB1B,KAAKa,MAAMa,OACT,EAAC,IAAD,yFAA2F1B,KAAKa,MAAMM,eAAtG,aACA,Q,2DChEP,sFAIe,MAAMS,UAAgBjC,YACpCyB,SACC,OACC,cACC,EAAC,IAAD,CAAiBS,KAAMC,IAAWC,OAAO,IAD1C,IACmD/B,KAAKU,MAAMsB,KAAOhC,KAAKU,MAAMsB,KAAO,kB,yCCP1FC,EAAOC,QAAU,CAAC,MAAQ,eAAe,MAAQ,eAAe,KAAO,gB,mCCDvE,2GAKe,MAAMC,UAAgBxC,YACpCyB,SACC,OACC,SAAKgB,MAAOC,IAAMC,cACjB,EAAC,IAAD,CAAiBT,KAAMU,MADxB,IAC0CvC,KAAKU,MAAM8B,c,2DCTxD,mFAGe,MAAMC,UAAkB9C,YACnCyB,SACI,OACI,SAAKgB,MAAOC,IAAMK,OACd,SAAKN,MAAOC,IAAMM,MAAOC,IAAK5C,KAAKU,MAAMmC,OAAQC,IAAK9C,KAAKU,MAAMqC,SACjE,UAAMX,MAAOC,IAAML,MAAnB,IACWhC,KAAKU,MAAMsB,W,yCCRtCC,EAAOC,QAAU,CAAC,aAAe,wB,kCCDjC,+GAKe,MAAMc,UAAoBrD,YACxCC,cACCC,QADa,KAWdoD,QAAU,KACT5C,MAAM,+CAAiDL,KAAKU,MAAMwC,SAASnC,KAAMC,GACzEA,EAASC,QACdF,KAAME,IACRjB,KAAKC,SAAS,CAAC,KAAQgB,EAAKC,UAb7BlB,KAAKa,MAAQ,CACZ,KAAQ,MAIVsC,oBACCnD,KAAKiD,UAWN7B,SACC,IAAIgC,EAAmBpD,KAAKU,MAAMC,UAAYX,KAAKU,MAAMwC,UAAYlD,KAAKU,MAAMC,SAAS0C,KAAKC,IAE9F,OAAuB,OAApBtD,KAAKa,MAAMK,KACN,EAAC,IAAD,MAIP,aACC,EAAC,IAAD,CAAW2B,OAAQ,mDAAoDE,OAAQ,KAAMf,KAAMhC,KAAKa,MAAMK,KAAKqC,WAC1GH,EAAkB,EAAC,IAAD,CAAmBzC,SAAUX,KAAKU,MAAMC,WAAc,O","file":"5.chunk.74724.esm.js","sourcesContent":["import { Component } from 'preact';\r\nimport HInput from '../forms/hinput';\r\nimport HButtonOnce from '../forms/hbuttononce';\r\nimport Success from '../success';\r\nimport Box from '../box';\r\n\r\nexport default class ChangePasswordBox extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"new_password\": null,\r\n\t\t\t\"status\": \"waiting\",\r\n\t\t\t\"revoked_tokens\": null\r\n\t\t};\r\n\t}\r\n\r\n\tonPasswordInputChange = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"new_password\": e.target.value\r\n\t\t})\r\n\t};\r\n\r\n\tonButtonClick = e => {\r\n\t\tthis.setState({\r\n\t\t\t\"status\": \"running\"\r\n\t\t});\r\n\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\"token\": this.props.loggedIn.token,\r\n\t\t\t\t\"new_password\": this.state.new_password\r\n\t\t\t})\r\n\t\t}).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\t\"status\": \"done\",\r\n\t\t\t\t\"revoked_tokens\": json.data.revoked_tokens\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet inputDisabled = (this.state.status !== \"waiting\");\r\n\r\n\t\treturn (\r\n\t\t\t<Box left={\"Cambia password\"}>\r\n\r\n\t\t\t\t<HInput\r\n\t\t\t\t\tlabel={\"Nuova password\"}\r\n\t\t\t\t\ttype={\"password\"}\r\n\t\t\t\t\tvalue={this.state.new_password}\r\n\t\t\t\t\tonChange={this.onPasswordInputChange}\r\n\t\t\t\t\tdisabled={inputDisabled}/>\r\n\r\n\t\t\t\t<HButtonOnce\r\n\t\t\t\t\tlabel={\"Cambia password\"}\r\n\t\t\t\t\tonClick={this.onButtonClick}\r\n\t\t\t\t\tstatus={this.state.status}/>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.status === \"done\"\r\n\t\t\t\t\t? <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.revoked_tokens} accessi.</Success>\r\n\t\t\t\t\t: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Loading extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<FontAwesomeIcon icon={faSpinner} pulse={true}/> {this.props.text ? this.props.text : \"Loading...\"}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","import { Component } from 'preact';\r\nimport style from './success.less';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default class Success extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class={style.successcolor}>\r\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"successcolor\":\"successcolor__1EkSB\"};","import { Component } from 'preact';\r\nimport Loading from '../components/loading';\r\nimport MainTitle from '../components/maintitle';\r\nimport ChangePasswordBox from '../components/actionboxes/changepasswordbox';\r\n\r\nexport default class UserProfile extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t\"data\": null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.user_id).then((response) => {\r\n\t\t\treturn response.json();\r\n\t\t}).then((json) => {\r\n\t\t\tthis.setState({\"data\": json.data});\r\n\t\t})\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet thisIsMyProfile = (this.props.loggedIn && this.props.user_id === this.props.loggedIn.user.uid);\r\n\r\n\t\tif(this.state.data === null) {\r\n\t\t\treturn <Loading/>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"ðŸ‘¤\"} text={this.state.data.username}/>\r\n\t\t\t\t{thisIsMyProfile ? <ChangePasswordBox loggedIn={this.props.loggedIn}/> : \"\"}\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t}\r\n}\r\n"],"sourceRoot":""}