{"version":3,"sources":["webpack:///./routes/Diario.js","webpack:///./components/Static/StaticDiarioEntry.js","webpack:///./components/Static/StaticDiarioEntry.less"],"names":["props","useRoyalnetData","allEntries","error","useState","index","setIndex","length","setLength","content","displayedEntries","undefined","icon","faSpinner","pulse","reversedEntries","slice","reverse","map","entry","data","backButton","disabled","onClick","faChevronLeft","forwardButton","faChevronRight","showAll","faPlus","pageId","left","center","right","image","media_url","class","style","src","alt","text","blockquoteClass","concatClass","diarioEntry","spoiler","spoilerEntry","highlighted","highlightedEntry","context","author","quoted_account","username","quoted","creator","timestamp","Date","this","toLocaleString","id","href","diario_id","className","ctSeparator","icSeparator","authorInfo","saveInfo","module","exports"],"mappings":"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","file":"route-Diario.chunk.db155.js","sourcesContent":["import { LeftRight, Panel, useRoyalnetData } from 'bluelib';\nimport ErrorBox from '../components/Static/ErrorBox';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronLeft, faChevronRight, faPlus, faSpinner } from '@fortawesome/free-solid-svg-icons';\nimport StaticDiarioEntry from '../components/Static/StaticDiarioEntry';\nimport { useState } from 'preact/hooks';\nimport WikiExisting from '../components/Dynamic/WikiExisting';\n\nexport default function (props) {\n\tconst [allEntries, error] = useRoyalnetData(\"GET\", \"/api/diario/all/v2\", {});\n\tconst [index, setIndex] = useState(0);\n\tconst [length, setLength] = useState(100);\n\n\tlet content = null;\n\tlet displayedEntries = [];\n\n\tif(error !== undefined) {\n\t\tcontent = (\n\t\t\t<ErrorBox error={error}/>\n\t\t);\n\t}\n\n\telse if(allEntries === undefined) {\n\t\tcontent = (\n\t\t\t<Panel>\n\t\t\t\t<FontAwesomeIcon icon={faSpinner} pulse={true}/> Loading...\n\t\t\t</Panel>\n\t\t)\n\t}\n\n\telse {\n\t\tconst reversedEntries = allEntries.slice();\n\t\treversedEntries.reverse();\n\n\t\tdisplayedEntries = reversedEntries.slice(index, index+length);\n\n\t\tcontent = (\n\t\t\t<Panel {...props}>\n\t\t\t\t{displayedEntries.map(entry => {return (\n\t\t\t\t\t<StaticDiarioEntry data={entry}/>\n\t\t\t\t)})}\n\t\t\t</Panel>\n\t\t);\n\t}\n\n\tconst backButton = (\n\t\t<button disabled={allEntries === undefined || index <= 0} onClick={() => setIndex(index-length)}>\n\t\t\t<FontAwesomeIcon icon={faChevronLeft}/> Precedenti {length}\n\t\t</button>\n\t);\n\tconst forwardButton = (\n\t\t<button disabled={allEntries === undefined || displayedEntries.length < length} onClick={() => setIndex(index+length)}>\n\t\t\t<FontAwesomeIcon icon={faChevronRight}/> Successive {length}\n\t\t</button>\n\t);\n\tconst showAll = (\n\t\t<button disabled={allEntries === undefined} onClick={() => setLength(allEntries.length)}>\n\t\t\t<FontAwesomeIcon icon={faPlus}/> Mostra tutte\n\t\t</button>\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t<WikiExisting pageId={29}/>\n\t\t\t<Panel>\n\t\t\t\t<LeftRight\n\t\t\t\t\tleft={backButton}\n\t\t\t\t\tcenter={showAll}\n\t\t\t\t\tright={forwardButton}\n\t\t\t\t/>\n\t\t\t</Panel>\n\t\t\t{content}\n\t\t\t<Panel>\n\t\t\t\t<LeftRight\n\t\t\t\t\tleft={backButton}\n\t\t\t\t\tcenter={showAll}\n\t\t\t\t\tright={forwardButton}\n\t\t\t\t/>\n\t\t\t</Panel>\n\t\t</div>\n\t)\n}\n","import style from './StaticDiarioEntry.less';\nimport { BaseLink, concatClass, Image } from 'bluelib';\nimport StaticUserLink from './StaticUserLink';\n\nexport default function (props) {\n\t// Image\n\tlet image = null;\n\tif(props.data.media_url !== null) {\n\t\timage = (\n\t\t\t<Image class={style.image} src={props.data.media_url} alt={\"[Immagine]\"}/>\n\t\t)\n\t}\n\n\t// Text\n\tlet text = null;\n\tif(props.data.text !== null) {\n\t\ttext = (\n\t\t\t<div class={style.text}>\n\t\t\t\t{props.data.text}\n\t\t\t</div>\n\t\t)\n\t}\n\n\t// Spoiler\n\tlet blockquoteClass = concatClass(style.diarioEntry, props.class);\n\tif(props.data.spoiler) {\n\t\tblockquoteClass = concatClass(blockquoteClass, style.spoilerEntry);\n\t}\n\tif(props.highlighted) {\n\t\tblockquoteClass = concatClass(blockquoteClass, style.highlightedEntry);\n\t}\n\n\t// Context\n\tlet context = null;\n\tif(props.data.context) {\n\t\tcontext = <span class={style.context}>, {props.data.context}</span>\n\t}\n\n\t// Author\n\tlet author = null;\n\tif(props.data.quoted_account !== null) {\n\t\tauthor = <span class={style.author}>— <StaticUserLink data={props.data.quoted_account}>{props.data.quoted_account.username}</StaticUserLink></span>\n\t}\n\telse if(props.data.quoted !== null) {\n\t\tauthor = <span class={style.author}>— {props.data.quoted}</span>\n\t}\n\n\t// Creator (saved by)\n\tlet creator = null;\n\tif(props.data.creator !== null) {\n\t\tcreator = <span class={style.creator}><StaticUserLink data={props.data.creator}>{props.data.creator.username}</StaticUserLink></span>\n\t}\n\n\t// Timestamp\n\tlet timestamp = null;\n\tif(props.data.timestamp !== null) {\n\t\ttimestamp = (\n\t\t\t<time class={style.timestamp}>\n\t\t\t\t{new Date(this.props.data.timestamp).toLocaleString()}\n\t\t\t</time>\n\t\t)\n\t}\n\n\t// ID\n\tlet id = (\n\t\t<BaseLink href={`/d/${props.data.diario_id}`} className={style.id}>/d/{props.data.diario_id}</BaseLink>\n\t);\n\n\n\t// Creator | Timestamp separator\n\tlet ctSeparator = null;\n\tif(creator && timestamp) {\n\t\tctSeparator = \" | \";\n\t}\n\n\t// ID | Creator | Timestamp separator\n\tlet icSeparator = null;\n\tif(creator || timestamp) {\n\t\ticSeparator = \" | \";\n\t}\n\n\treturn (\n\t\t<blockquote class={blockquoteClass}>\n\t\t\t<div class={style.content}>\n\t\t\t\t{image}\n\t\t\t\t{text}\n\t\t\t</div>\n\t\t\t<div class={style.authorInfo}>\n\t\t\t\t{author}\n\t\t\t\t{context}\n\t\t\t</div>\n\t\t\t<div class={style.saveInfo}>\n\t\t\t\t{creator}\n\t\t\t\t{ctSeparator}\n\t\t\t\t{timestamp}\n\t\t\t\t{icSeparator}\n\t\t\t\t{id}\n\t\t\t</div>\n\t\t</blockquote>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"diarioEntry\":\"diarioEntry__1I_xu\",\"content\":\"content__3NwRJ\",\"authorInfo\":\"authorInfo__1vrdh\",\"saveInfo\":\"saveInfo__zgPyz\",\"id\":\"id__1riQ8\",\"author\":\"author__3Z0Ol\",\"text\":\"text__1-MLY\",\"spoilerEntry\":\"spoilerEntry__TUZ9R\",\"highlightedEntry\":\"highlightedEntry__2Opi-\"};"],"sourceRoot":""}