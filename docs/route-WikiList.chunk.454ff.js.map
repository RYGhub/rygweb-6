{"version":3,"sources":["webpack:///./routes/WikiList.js"],"names":["useRoyalnetData","data","error","loginStatus","useContext","RoyalnetLoginStatus","undefined","icon","faSpinner","pulse","categories","page","category","push","console","log","panels","Object","keys","pages","title","disabled","user","roles","includes","href","faPlusSquare"],"mappings":"q9BAQe,qBAAiB,MACTA,YAAgB,MAAO,qBAAtCC,EADwB,KAClBC,EADkB,KAEzBC,EAAcC,YAAWC,KAE/B,QAAaC,IAAVJ,EACF,OACC,EAAC,IAAD,CAAUA,MAAOA,IAInB,QAAYI,IAATL,EACF,OACC,EAAC,IAAD,KACC,EAAC,IAAD,CAAiBM,KAAMC,IAAWC,OAAO,IAD1C,0BAOF,IADA,IACA,EADMC,EAAa,GACnB,IAAkBT,KAAlB,aAAwB,KAAdU,EAAc,aACUL,IAA9BI,EAAWC,EAAKC,YAClBF,EAAWC,EAAKC,UAAY,IAE7BF,EAAWC,EAAKC,UAAUC,KAAKF,GAGhCG,QAAQC,IAAIL,GAGZ,IADA,IAAMM,EAAS,GACf,MAAsBC,OAAOC,KAAKR,GAAlC,eAA+C,CAE9C,IAFG,IAEH,EAFSE,EAAQ,KACXO,EAAQ,GACd,IAAkBT,EAAWE,MAA7B,aAAwC,CACvCO,EAAMN,KACL,YAAI,EAAC,IAAD,CAAgBZ,KAFkB,YAKxCe,EAAOH,KACN,EAAC,IAAD,CAAOO,MAAOR,GACb,YACEO,KAML,OACC,aACC,EAAC,IAAD,KACC,EAAC,IAAD,CAAMZ,MAAM,EAAOc,WAAYlB,GAAeA,EAAYmB,KAAKC,MAAMC,SAAS,WAAYC,KAAM,UAAU,EAAC,IAAD,CAAiBlB,KAAMmB,MAAjI,gBAED,EAAC,IAAD,KACEV,M","file":"route-WikiList.chunk.454ff.js","sourcesContent":["import { Panel, RoyalnetLoginStatus, Split, useRoyalnetData } from 'bluelib';\r\nimport ErrorBox from '../components/Static/ErrorBox';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlusSquare, faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport Link from '../components/Dynamic/Link';\r\nimport { useContext } from 'preact/hooks';\r\nimport StaticWikiLink from '../components/Static/StaticWikiLink';\r\n\r\nexport default function (props) {\r\n\tconst [data, error] = useRoyalnetData(\"GET\", \"/api/wiki/list/v2\");\r\n\tconst loginStatus = useContext(RoyalnetLoginStatus);\r\n\r\n\tif(error !== undefined) {\r\n\t\treturn (\r\n\t\t\t<ErrorBox error={error}/>\r\n\t\t);\r\n\t}\r\n\r\n\tif(data === undefined) {\r\n\t\treturn (\r\n\t\t\t<Panel>\r\n\t\t\t\t<FontAwesomeIcon icon={faSpinner} pulse={true}/> Loading pages list...\r\n\t\t\t</Panel>\r\n\t\t)\r\n\t}\r\n\r\n\tconst categories = {};\r\n\tfor(const page of data) {\r\n\t\tif(categories[page.category] === undefined) {\r\n\t\t\tcategories[page.category] = []\r\n\t\t}\r\n\t\tcategories[page.category].push(page);\r\n\t}\r\n\r\n\tconsole.log(categories);\r\n\r\n\tconst panels = [];\r\n\tfor(const category of Object.keys(categories)) {\r\n\t\tconst pages = [];\r\n\t\tfor(const page of categories[category]) {\r\n\t\t\tpages.push(\r\n\t\t\t\t<li><StaticWikiLink data={page}/></li>\r\n\t\t\t)\r\n\t\t}\r\n\t\tpanels.push(\r\n\t\t\t<Panel title={category}>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{pages}\r\n\t\t\t\t</ul>\r\n\t\t\t</Panel>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Panel>\r\n\t\t\t\t<Link icon={false} disabled={!(loginStatus && loginStatus.user.roles.includes(\"member\"))} href={\"/w/new\"}><FontAwesomeIcon icon={faPlusSquare}/> Crea nuova</Link>\r\n\t\t\t</Panel>\r\n\t\t\t<Split>\r\n\t\t\t\t{panels}\r\n\t\t\t</Split>\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"sourceRoot":""}