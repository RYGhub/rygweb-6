{"version":3,"sources":["webpack:///./components/changepasswordbox.js","webpack:///./components/maintitle.less","webpack:///./components/changeNumber.less","webpack:///./components/hbuttononce.js","webpack:///./components/userInfoBox.js","webpack:///./components/invisiTable.less","webpack:///./components/success.js","webpack:///./components/maintitle.js","webpack:///./components/fiorygiBox.less","webpack:///./components/logoutBox.js","webpack:///./components/changeNumber.js","webpack:///./components/fiorygiBox.js","webpack:///./components/success.less","webpack:///./routes/userprofile.js","webpack:///./components/invisiTable.js"],"names":["ChangePasswordBox","onPasswordInputChange","e","setState","target","value","onButtonClick","fetch","method","body","JSON","stringify","props","loggedIn","token","state","new_password","then","response","json","data","revoked_tokens","render","left","label","type","this","onChange","disabled","status","onClick","Component","module","exports","HButtonOnce","icon","faSpinner","pulse","faCheck","faExclamationCircle","toString","UserInfoBox","user","uid","role","Error","class","style","success","faCheckCircle","children","MainTitle","title","image","src","imgsrc","alt","imgalt","text","LogoutBox","onLogoutClick","ChangeNumber","colorClass","additionalText","positive","neutral","negative","changenumber","FiorygiBox","getData","j","componentDidMount","contents","tablerows","transactions","map","t","index","key","amount","change","reason","transactiontable","current","fiorygi","UserProfile","userId","componentDidUpdate","previousProps","thisIsMyProfile","username","InvisiTable","invisitable"],"mappings":"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","file":"route-userprofile.chunk.7c193.js","sourcesContent":["import { Component } from 'preact';\nimport HInput from './hinput';\nimport HButtonOnce from './hbuttononce';\nimport Success from './success';\nimport Box from './box';\n\nexport default class ChangePasswordBox extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"new_password\": null,\n\t\t\t\"status\": \"waiting\",\n\t\t\t\"revoked_tokens\": null\n\t\t};\n\t}\n\n\tonPasswordInputChange = e => {\n\t\tthis.setState({\n\t\t\t\"new_password\": e.target.value\n\t\t})\n\t};\n\n\tonButtonClick = e => {\n\t\tthis.setState({\n\t\t\t\"status\": \"running\"\n\t\t});\n\n\t\tfetch(\"https://rygapi.steffo.eu/api/token/passwd/v1\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify({\n\t\t\t\t\"token\": this.props.loggedIn.token,\n\t\t\t\t\"new_password\": this.state.new_password\n\t\t\t})\n\t\t}).then((response) => {\n\t\t\treturn response.json();\n\t\t}).then((json) => {\n\t\t\tthis.setState({\n\t\t\t\t\"status\": \"done\",\n\t\t\t\t\"revoked_tokens\": json.data.revoked_tokens\n\t\t\t});\n\t\t});\n\t};\n\n\trender() {\n\t\tlet inputDisabled = (this.state.status !== \"waiting\");\n\n\t\treturn (\n\t\t\t<Box left={\"Cambia password\"}>\n\n\t\t\t\t<HInput\n\t\t\t\t\tlabel={\"Nuova password\"}\n\t\t\t\t\ttype={\"password\"}\n\t\t\t\t\tvalue={this.state.new_password}\n\t\t\t\t\tonChange={this.onPasswordInputChange}\n\t\t\t\t\tdisabled={inputDisabled}/>\n\n\t\t\t\t<HButtonOnce\n\t\t\t\t\tlabel={\"Cambia password\"}\n\t\t\t\t\tonClick={this.onButtonClick}\n\t\t\t\t\tstatus={this.state.status}/>\n\n\t\t\t\t{\n\t\t\t\t\tthis.state.status === \"done\"\n\t\t\t\t\t? <Success>Password cambiata con successo! E' stato automaticamente effettuato il logoff da {this.state.revoked_tokens} accessi.</Success>\n\t\t\t\t\t: \"\"\n\t\t\t\t}\n\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title__2PYT8\",\"image\":\"image__2zge7\",\"text\":\"text__2ez1X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"changenumber\":\"changenumber__3QTDZ\",\"positive\":\"positive__2qKdo\",\"neutral\":\"neutral__1rGMM\",\"negative\":\"negative__1tWJB\"};","import { Component } from 'preact';\r\nimport HButton from './hbutton';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCheck, faExclamationCircle, faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport Error from './error';\r\n\r\nexport default class HButtonOnce extends Component {\r\n\trender() {\r\n\t\tif(this.props.status === \"waiting\") {\r\n\t\t\treturn <HButton label={<span>{this.props.label}</span>} onClick={this.props.onClick}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"running\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faSpinner} pulse={true}/> {this.props.label}</span>} disabled={true}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"done\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faCheck}/> {this.props.label}</span>} disabled={true}/>;\r\n\t\t}\r\n\t\telse if(this.props.status === \"error\") {\r\n\t\t\treturn <HButton label={<span><FontAwesomeIcon icon={faExclamationCircle}/> {this.props.label}</span>} onClick={this.props.onClick}/>;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <Error>Invalid status for HButtonOnce: {this.props.status.toString()}</Error>\r\n\t\t}\r\n\t}\r\n}\r\n","import { Component } from 'preact';\nimport Box from './box';\n\nexport default class UserInfoBox extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Box left={\"Informazioni tecniche\"}>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>ID: <b>{this.props.user.uid}</b></li>\n\t\t\t\t\t<li>Tipo utente: <b>{this.props.user.role}</b></li>\n\t\t\t\t</ul>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"invisitable\":\"invisitable__2BeJv\"};","import { Component } from 'preact';\nimport style from './success.less';\nimport Panel from \"./panel\";\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\n\nexport default class Error extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Panel class={style.success}>\n\t\t\t\t<FontAwesomeIcon icon={faCheckCircle}/> {this.props.children}\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n","import {Component} from \"preact\"\r\nimport style from \"./maintitle.less\"\r\n\r\nexport default class MainTitle extends Component {\r\n    render() {\r\n        return (\r\n            <div class={style.title}>\r\n                <img class={style.image} src={this.props.imgsrc} alt={this.props.imgalt} />\r\n                <span class={style.text}>\r\n                    &nbsp;{this.props.text}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"current\":\"current__24hce\",\"transactiontable\":\"transactiontable__3P0fZ\",\"amount\":\"amount__2Nl11\",\"positive\":\"positive__3nc4y\",\"negative\":\"negative__1SDlm\"};","import { Component } from 'preact';\nimport Box from './box';\nimport HButton from './hbutton';\n\nexport default class LogoutBox extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Box left={\"Logout\"}>\n\t\t\t\t<HButton label={\"Logout\"} onClick={this.props.onLogoutClick}/>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","import { Component } from 'preact';\r\nimport style from './changeNumber.less';\r\n\r\nexport default class ChangeNumber extends Component {\r\n\trender() {\r\n\t\tlet colorClass;\r\n\t\tlet additionalText = \"\";\r\n\t\tif(this.props.children > 0) {\r\n\t\t\tcolorClass = style.positive;\r\n\t\t\tadditionalText = \"+\";\r\n\t\t}\r\n\t\telse if(this.props.children === 0) {\r\n\t\t\tcolorClass = style.neutral;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcolorClass = style.negative;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<span class={style.changenumber + \" \" + colorClass + \" \" + this.props.class}>\r\n\t\t\t\t{additionalText}{this.props.children}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Component } from 'preact';\nimport Loading from './loading';\nimport Box from './box';\nimport style from './fiorygiBox.less';\nimport InvisiTable from './invisiTable';\nimport ChangeNumber from './changeNumber';\n\nexport default class FiorygiBox extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"data\": null\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getData();\n\t}\n\n\tgetData = () => {\n\t\tfetch(`https://rygapi.steffo.eu/api/user/fiorygi/get/v1?id=${this.props.user.uid}`).then(response => response.json()).then((j) => {\n\t\t\tthis.setState({\n\t\t\t\t\"data\": j.data\n\t\t\t});\n\t\t})\n\t};\n\n\trender() {\n\t\tlet contents = <Loading/>;\n\n\t\tif(this.state.data !== null) {\n\t\t\tlet tablerows = this.state.data.transactions.map((t, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td class={style.amount}><ChangeNumber>{t.change}</ChangeNumber></td>\n\t\t\t\t\t\t<td>{t.reason}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tcontents = (\n\t\t\t\t<div>\n\t\t\t\t\t<InvisiTable class={style.transactiontable}>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr class={style.current}>\n\t\t\t\t\t\t\t\t<td class={style.amount}><ChangeNumber>{this.state.data.fiorygi}</ChangeNumber></td>\n\t\t\t\t\t\t\t\t<td>fiorygi totali</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t{tablerows}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</InvisiTable>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Box left={\"Fiorygi\"}>\n\t\t\t\t{contents}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"success\":\"success__30g14\"};","import { Component } from 'preact';\nimport Loading from '../components/loading';\nimport MainTitle from '../components/maintitle';\nimport ChangePasswordBox from '../components/changepasswordbox';\nimport UserInfoBox from '../components/userInfoBox';\nimport Box from '../components/box';\nimport LogoutBox from '../components/logoutBox';\nimport FiorygiBox from '../components/fiorygiBox';\n\nexport default class UserProfile extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t\"data\": null,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif(this.props.userId) {\n\t\t\tthis.getData();\n\t\t}\n\t}\n\n\tcomponentDidUpdate(previousProps, previousState, snapshot) {\n\t\tif(previousProps.userId !== this.props.userId && this.props.userId) {\n\t\t\tthis.getData();\n\t\t}\n\t}\n\n\tgetData = () => {\n\t\tfetch(\"https://rygapi.steffo.eu/api/user/get/v1?id=\" + this.props.userId).then((response) => {\n\t\t\treturn response.json();\n\t\t}).then((json) => {\n\t\t\tthis.setState({\"data\": json.data});\n\t\t})\n\t};\n\n\trender() {\n\t\tlet thisIsMyProfile = (this.props.loggedIn && this.props.userId === this.props.loggedIn.user.uid);\n\n\t\tif(this.state.data === null) {\n\t\t\treturn <Box left={\"Caricamento...\"}><Loading/></Box>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<MainTitle imgsrc={\"https://combo.steffo.eu/open/ryg/GenericUser.png\"} imgalt={\"👤\"} text={this.state.data.username}/>\n\t\t\t\t<FiorygiBox user={this.state.data}/>\n\t\t\t\t<UserInfoBox user={this.state.data}/>\n\t\t\t\t{thisIsMyProfile ? <ChangePasswordBox loggedIn={this.props.loggedIn}/> : \"\"}\n\t\t\t\t{thisIsMyProfile ? <LogoutBox onLogoutClick={this.props.onLogoutClick}/> : \"\"}\n\t\t\t</div>\n\t\t)\n\n\t}\n}\n","import { Component } from 'preact';\r\nimport style from './invisiTable.less';\r\n\r\nexport default class InvisiTable extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<table class={style.invisitable + \" \" + this.props.class}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</table>\r\n\t\t);\r\n\t}\r\n}\r\n"],"sourceRoot":""}